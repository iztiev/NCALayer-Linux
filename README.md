# NCALayer for Linux

–í–ï–°–¨ –ò–°–•–û–î–ù–´–ô –ö–û–î –ü–†–û–ï–ö–¢–ê –û–¢–ö–†–´–¢ –ò –ü–û–õ–ù–û–°–¢–¨–Æ –í–û–°–ü–†–û–ò–ó–í–û–î–ò–ú! –ù–û –¢–ï–ú –ù–ï –ú–ï–ù–ï–ï –Ø –ù–ï –ù–ï–°–£ –û–¢–í–ï–¢–°–í–¢–ï–ù–ù–û–°–¢–¨ –ó–ê –õ–Æ–ë–û–ô –í–†–ï–î –ü–†–ò–ù–ï–°–ï–ù–ù–´–ô –ü–†–ò –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –î–ê–ù–ù–û–ì–û –ü–†–û–ï–ö–¢–ê!

## –ü—Ä–∏—á–∏–Ω—ã –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –ª–∏–Ω—É–∫—Å:

### –£–∂–∞—Å—Ç–Ω–∞—è –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞, –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —ç—Ç–æ:

```bash
zenity=`whereis -b zenity | grep -i bin |  cut -d' ' -f2`;
```

–∏
```bash
certutil=`whereis -b certutil | grep -i bin |  cut -d' ' -f2`;
```

–Ø –Ω–µ —Å–æ–≤—Å–µ–º –ø—Ä–æ—Ñ–∏ —Ç—É—Ç, –Ω–æ –º–∞–ª–æ—Å—Ç—å –Ω–µ –∫–∞–∂–µ—Ç—Å—è —á—Ç–æ —ç—Ç–æ –ø–µ—Ä–µ–±–æ—Ä? –≠—Ç–æ—Ç –≥–æ–≤–Ω–æ–∫–æ–¥ —Ä–µ—à–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π - `which zenity` –∏ `which certutil`

–ò —Å–ª–µ–¥—É—â–∏–π facepalm —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ - –∑–∞—Ö–∞—Ä–¥–∫–æ–¥–µ–Ω–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª, –∞ –∏–º–µ–Ω–Ω–æ `gnome-terminal`. are you fucking serious? —Ö–æ—Ç—è—è—è –±—ã xterm –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –±—ã —á—Ç–æ–ª—å, —Ö–æ—Ç—è –≤–æ–æ–±—â–µ —ç—Ç–æ —Ç–æ–∂–µ –Ω–µ —Å–æ–≤—Å–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —É–∂–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤ –¥–∞–∂–µ –µ–≥–æ –Ω–µ –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ –¥–µ—Ñ–æ–ª—Ç—É.

### –ë–æ–ª–µ–µ —à–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã:
 - Debian/Ubuntu
 - Arch Linux (via AUR)
 - Fedora/RedHat/CentOS
 - NixOS (via [Nix Flakes]((https://wiki.nixos.org/wiki/Flakes/ru)))
 - AppImage (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### üì¶ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

–°–∫–∞—á–∞–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∏–∑ [GitHub Releases](https://github.com/ZhymabekRoman/NCALayer-Linux/releases/latest):

- **Arch Linux**: `ncalayer-*.pkg.tar.zst`
- **Debian/Ubuntu**: `ncalayer_*.deb`
- **Fedora** (—Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π Java): `ncalayer-*fc*.rpm` (~260 –ú–ë)
- **RHEL/CentOS/Rocky** (—Å–∏—Å—Ç–µ–º–Ω–∞—è Java): `ncalayer-*el*.rpm` (~12 –ú–ë)
- **AppImage** (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π): `NCALayer-x86_64.AppImage`

### Arch Linux

**–ò–∑ AUR:**
```bash
yay -S ncalayer
# –∏–ª–∏
paru -S ncalayer
```

**–ò–∑ —Å–∫–∞—á–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞:**
```bash
sudo pacman -U ncalayer-*.pkg.tar.zst
```

### Debian/Ubuntu

```bash
sudo dpkg -i ncalayer_*.deb
sudo apt-get install -f  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
```

### Fedora/RHEL/CentOS

**Fedora** (—Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π Java 8):
```bash
sudo dnf install ncalayer-*fc*.rpm
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Fedora –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç Java –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ([–ø–æ–¥—Ä–æ–±–Ω–µ–µ](https://docs.fedoraproject.org/en-US/quick-docs/installing-java/)). –ü–æ—ç—Ç–æ–º—É –¥–ª—è Fedora –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–∫–µ—Ç —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π Java 8 (~260 –ú–ë).

**RHEL/CentOS/Rocky Linux** (—Å–∏—Å—Ç–µ–º–Ω–∞—è Java 8):
```bash
sudo dnf install ncalayer-*el*.rpm
```

### NixOS

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ** Java 8 –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ NixOS –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç JavaFX. –ü–æ—ç—Ç–æ–º—É –¥–ª—è NixOS –¥–µ—Ä–∏–≤–∞—Ü–∏—è —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≤ NCALayer Java 8.

–î–æ–±–∞–≤—å—Ç–µ `ncalayer` –≤ –≤–∞—à `flake.nix`

```nix
{
  # –≠—Ç–æ –Ω–µ –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è NixOS, –Ω–æ —Ç—É—Ç –≤–∏–¥–Ω–æ –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é ncalayer –≤ –≤–∞—à —Ñ–ª–µ–π–∫.
  description = "–í–∞—à —Å–∏—Å—Ç–µ–º–Ω—ã–π flake.nix (–æ–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ /etc/nixos/flake.nix)";

  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";

    # –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–ø—É—Ç —Å—é–¥–∞
    ncalayer = {
      url = "github:ZhymabekRoman/NCALayer-Linux";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };

  outputs = { self, nixpkgs, ...}: {
    nixosConfigurations = {
      yourHost = nixpkgs.lib.nixosSystem {
        system = "x86_64-linux";

        modules = [
          
          # –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –º–æ–¥—É–ª—å
          inputs.ncalayer.nixosModules.default

          # –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ ncalayer
          ({ pkgs, lib, ... }: {
            programs.ncalayer {
              enable = true;
              installCerts = true; # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)
              enableSmartCards = true; # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç pcscd –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–º–∞—Ä—Ç-–∫–∞—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)
            };
          })
        ];
      };
    };
  };
}
```

–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
```bash
sudo nixos-rebuild switch --flake /–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/flake.nix
```

### AppImage (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

```bash
chmod +x NCALayer-x86_64.AppImage
./NCALayer-x86_64.AppImage
```

AppImage –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ Linux.

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü–∞–∫–µ—Ç—ã –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤ (deb/rpm/pkg.tar.zst/NixOS)

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
ncalayer
```

–ò–ª–∏ –Ω–∞–π–¥–∏—Ç–µ "NCALayer" –≤ –º–µ–Ω—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (—Ä–∞–∑–¥–µ–ª "–°–µ—Ç—å").

### AppImage

```bash
./NCALayer-x86_64.AppImage
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ù–£–¶ –†–ö

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ù–£–¶ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –≤–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–∞ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã.

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—Ä—É—á–Ω—É—é:

**–î–ª—è –ø–∞–∫–µ—Ç–æ–≤ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤:**
```bash
ncalayer-install-certs
```

**–î–ª—è AppImage:**
```bash
./NCALayer-x86_64.AppImage --install-certs
```

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ Firefox, Chrome, Chromium –∏ –¥—Ä—É–≥–∏–µ –±—Ä–∞—É–∑–µ—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ NSS –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ü–∞–∫–µ—Ç—ã –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤

**Debian/Ubuntu –∏ Arch Linux** (—Ä–∞–∑–º–µ—Ä ~12 –ú–ë):
- **Java 8 JRE** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
- **certutil** (–∏–∑ –ø–∞–∫–µ—Ç–∞ nss-tools/libnss3-tools)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: pcscd –∏ libpcsclite –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–º–∞—Ä—Ç-–∫–∞—Ä—Ç

**Fedora/RHEL/CentOS** (—Ä–∞–∑–º–µ—Ä ~260 –ú–ë):
- **–í–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Java 8 JRE** (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π Java)
- **certutil** (–∏–∑ –ø–∞–∫–µ—Ç–∞ nss-tools)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: pcsc-lite –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–º–∞—Ä—Ç-–∫–∞—Ä—Ç

**NixOS**
- **Nix Flakes** (—Å–º [NixOS Wiki](https://wiki.nixos.org/wiki/Flakes/ru))
- **–í–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Java 8 JRE** (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π Java)
- –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### AppImage (—Ä–∞–∑–º–µ—Ä ~103 –ú–ë)
- –ù–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ, –≤ —Ç–æ–º —á–∏—Å–ª–µ Java 8)
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ Linux —Å glibc

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Java

NCALayer —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è Java 8 –∏ –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —ç—Ç–æ–π –≤–µ—Ä—Å–∏–µ–π. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–æ–ª–µ–µ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è Java (17+), –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç —Ñ–ª–∞–≥ `-Djava.security.manager=allow` –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º Security Manager.

**–í–∞–∂–Ω–æ:** –ù–∞—á–∏–Ω–∞—è —Å Java 18, Security Manager –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ —Å JDK 24 - –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω ([JEP 411](https://openjdk.org/jeps/411)). –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Java 17+ –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

–î–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Java 8. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–æ–±–ª–µ–º–µ: https://stackoverflow.com/questions/76151072/error-during-sbt-launcher-java-lang-unsupportedoperationexception-the-security

## –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ –ø–∞–∫–µ—Ç–æ–≤ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ [BUILD.md](BUILD.md).

## –õ–∏—Ü–µ–Ω–∑–∏—è

Packaging and build scripts: MIT License (see [LICENSE](LICENSE))

NCALayer application: Copyright by National Certification Authority of the Republic of Kazakhstan